<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.2.0/p5.js"></script>
    <script
      src="https://unpkg.com/ml5@latest/dist/ml5.min.js"
      type="text/javascript"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.20/lodash.min.js"></script>
    <title>Make Your Mark - Live Page</title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="./assets/css/style.css">
    <link rel="stylesheet" href="./assets/css/responsive.css">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="./assets/bootstrap/css/bootstrap.min.css">
</head>
<body>

    
<!-- Content Start -->

<div id="livepage">
  <script>
    // Tweaked from ml5.js: Pose Estimation with PoseNet https://thecodingtrain.com/Courses/ml5-beginners-guide/7.1-posenet.html
//https://youtu.be/OIo-DIOkNVg
// https://editor.p5js.org/codingtrain/sketches/ULA97pJXR

let video;
let poseNet;
let pose;
let skeleton;
let d;
let canvas;

function setup() {
  canvas = createCanvas(windowWidth, windowHeight);
  video = createCapture(VIDEO);
  canvas.position(0,0);
  canvas.style('z-index', '-1');
  
  video.hide();
  poseNet = ml5.poseNet(video, modelLoaded);
  poseNet.on('pose', gotPoses);
}

function gotPoses(poses) {
  //console.log(poses); 
  if (poses.length > 0) {
    pose = poses[0].pose;
    skeleton = poses[0].skeleton;
  }
}


function modelLoaded() {
  console.log('poseNet ready');
}

function draw() {
  push();
  image(video, 0, 0);
  // translate(width, 0); // move to far corner
  // scale(1.0,-1.0);
  pop();


  if (pose) {
    let eyeR = pose.rightEye;
    let eyeL = pose.leftEye;
    let d = dist(eyeR.x, eyeR.y, eyeL.x, eyeL.y);
      // console.log(d);
    // fill(255);
    // ellipse(pose.nose.x, pose.nose.y, d);
    fill(255);
    ellipse(pose.rightWrist.x, pose.rightWrist.y, 32);
     line(pose.rightWrist.x, pose.rightWrist.y, pose.rightElbow.x, pose.rightElbow.y,);
    stroke(255);
    ellipse(pose.leftWrist.x, pose.leftWrist.y, 32);
    stroke(255);
     line(pose.leftWrist.x, pose.leftWrist.y, pose.leftElbow.x, pose.rightElbow.y,);
    
    // for (let i = 0; i < pose.keypoints.length; i++) {
    //   let x = pose.keypoints[i].position.x;
    //   let y = pose.keypoints[i].position.y;
    //   fill(0,255,0);
    //   ellipse(x,y,16,16);
    // }
    
    // for (let i = 0; i < skeleton.length; i++) {
    //   let a = skeleton[i][0];
    //   let b = skeleton[i][1];
    //   strokeWeight(2);
    //   stroke(255);
    //   line(a.position.x, a.position.y,b.position.x,b.position.y);      
    // }
    if (d > 50){
    text('stand back',100,100);
      textSize(100);
    fill(0);
      
  }
  }
  
}
  </script>
    

    <div class="container">
        <div class="row">
            <div class="col-md-12 text-center">
                <h2>You’re <img src="./assets/imgs/Ellipse 9.svg" alt=""> LIVE</h2>
                <div class="img-wrapper">
<!--                     <img src="./assets/imgs/Ellipse 8.png" alt="img"> -->
                </div>

                <div class="hello">
                    <img src="./assets/imgs/Vector 1.svg" alt="">
                    <h6>Wave hello!</h6>
                </div>
                
            </div>
        </div>
    </div>

</div>

<div id="footer">
    <div class="col-md-12 text-right">
        <h5>   <a href="./create.html"> Let’s start</a></h5>
    </div>
</div>









<!-- Content END -->


























    <!-- BOOTSTRAP JS FILES -->
    <script src="./assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="./assets/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="./assets/jquery/jquery.min.js"></script>
</body>
</html>